## Модульные тесты

Логические блоки приложения, проверяемые модульными тестами:

- **Работа с git - клонирование удаленного репозитория**

  *Проверяемые сценарии:*
  - при попытке склонировать существующий публичный репозиторий должны получить сообщение об успешном результате
  - при попытке склонировать существующий публичный репозиторий должна появиться папка с ним
  - склонированный репозиторий можно открыть при помощи nodegit
  - eсли репозиторий уже был склонирован ранее, вместо клонирования должна быть выполнена команда `git pull`
  - если пытаемся склонировать несуществующий репозиторий, должны получить соответствующее сообщение об ошибке

- **Работа с git - информация о коммитах локального репозитория**

  *Проверяемые сценарии:*
  - при запросе информации о последнем коммите, должнен возвращаться промис, который содержит сообщение коммита, его хэш, название ветки и имя автора
  - при запросе информации обо всех коммитах, должен возвращаться массив промисов

- **Работа с git - получение изменений из удаленного репозитория**

  *Проверяемые сценарии:*
  - при запросе информации о наличии новых коммитов, должен возвращаться промис с массивом коммитов, которых нет в локальном репозитории, но есть в удаленном

- **Сервер - получение настроек**

  *Проверяемые сценарии:*
  - при GET запросе к ручке /api/settings, сервер должен получить из БД объект с текущими настройками и вернуть его со статусом 200

- **Сервер - сохранение новых настроек**

  *Проверяемые сценарии:*
  - при POST запросе к ручке /api/settings, сервер должен сохранить в БД переданные настройки и вернуть объект с полем result: 'success' и статусом 200
  - после сохранения настроек в БД, сервер должен поставить последний коммит в очередь на сборку
  - если в настройках указан ненулевой период, должен запускаться setInterval

- **Сервер - получение списка сборок**

  *Проверяемые сценарии:*
  - при GET запросе к ручке /api/builds, сервер должен получить из БД объект с массивом билдов и вернуть его со статусом 200

- **Сервер - получение информации о конкретной сборке**

  *Проверяемые сценарии:*
  - при GET запросе к ручке /api/builds/:buildId, сервер должен получить из БД объект с деталями билда и вернуть его со статусом 200

- **Сервер - получение логов сборки**

  *Проверяемые сценарии:*
  - при GET запросе к ручке /api/builds/:buildId/logs, сервер должен получить из БД строку с логами и вернуть её со статусом 200

- **Сервер - добавление в очередь на сборку**

  *Проверяемые сценарии:*
  - при POST запросе к ручке /api/builds/:commitHash, сервер должен сохранить в БД детали коммита, добавляемого в очередь

- **Клиент** (В разработке)

  *Проверяемые сценарии:*

## Интеграционные тесты

Логические блоки приложения, проверяемые интеграционными тестами:

- **Проверка работы стартовой страницы**

  *Проверяемые сценарии:*
  - Если настройки не заданы, по корневому адресу должна открываться Start Page
  - Можно перейти со стартовой страницы к настройкам по кнопке "Open settings"
  - Можно перейти со стартовой страницы к настройкам по кнопке "settings" в header

- **Проверка работы страницы settings**

  *Проверяемые сценарии:*
  - Можно перейти на страницу настроек по адресу "/settings"
  - Eсли не заполнено поле repo-name, кнопка Save в состоянии disabled
  - Eсли не заполнено поле build command, кнопка Save в состоянии disable
  - Eсли период не является числом, кнопка Save в состоянии disable
  - При попытке сохранить в настройках несуществующий репозиторий вылезет сообщение об ошибке
  - После сохранения настроек выполняется переход на страницу history

- **Проверка работы страницы history**

  *Проверяемые сценарии:*
  - Если настройки заданы, по корневому адресу должна открываться History Page
  - Можно перейти со страницы history к настройкам по кнопке "settings" в header
  - На странице history в качестве заголовка отображается название репозитория
  - При нажатии на кнопку Run build появляется всплывающее окно с инпутом
  - После отправки коммита на сборку через форму во всплывающем окне откроется страница с деталями билда
  - По клику на карточку билда происходит переход на страницу с деталями билда

- **Проверка работы страницы details**

  *Проверяемые сценарии:*
  - По клику на кнопку rebuid, коммит снова ставится в очередь на сборку
  - По клику на кнопку rebuid, коммит снова ставится в очередь на сборку
  - Можно перейти со страницы details к настройкам по кнопке "settings" в header
  - Можно перейти со страницы details на страницу history по клику на название репозитория